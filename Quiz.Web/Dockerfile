#Stage 1 building the app
FROM node:latest as node
WORKDIR /app
COPY . ./
RUN npm install
RUN npm run build_prod

#Stage 2
FROM nginx:alpine
# Copy the dist folder generated by stage 1, to the default nqinx folder
COPY --from=node /app/dist/Quiz-Web  /var/www
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 3000

ENTRYPOINT ["nginx","-g","daemon off;"]